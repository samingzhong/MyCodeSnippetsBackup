#!/bin/bash
echo "pushing local changes to github repo..."
cd `dirname $0`
echo "1. push"
git pull;
echo ""

# echo "2. git status"
# gitStatus=`git status`
# echo $gitStatus|grep "Changes not staged for commit"
# if [[ $? == 0 ]]; then
# 	echo "æœ¬åœ°æœ‰å˜æ›´ï¼Œä½†æ˜¯å˜æ›´è¿˜æ²¡æœ‰è¢«å­˜å‚¨èµ·æ¥ï¼Œéœ€è¦å³å°†æ‰§è¡Œgit addã€‚ã€‚ã€‚"
# else 
# 	echo "æš‚æ— "
# fi

echo "2. add *"
git add *

gitStatusResult=`git status`
echo $gitStatusResult|grep "Changes to be committed"
if [[ $? == 1 ]]; then
	echo "å½“å‰æ— ä»»ä½•æ›´æ–°ã€‚å³å°†é€€å‡ºã€‚ã€‚ã€‚"
	exit 0;
else 
	echo "æ£€æŸ¥åˆ°æœ¬åœ°æœ‰ç¼“å­˜èµ·æ¥çš„å˜æ›´ã€‚ã€‚ã€‚"
fi
echo ""



echo "3. æ‰‹åŠ¨è¾“å…¥æäº¤æ—¥å¿—?ï¼ˆé€‰æ‹©nçš„è¯ï¼Œæäº¤æ—¥å¿—ä¸ºç³»ç»Ÿæ—¥æœŸï¼‰ y/n:"
read choice
message=`date`
if [[ $choice == y ]]; then
	echo -n "è¾“å…¥æäº¤æ—¥å¿—:"
	read message
fi
git commit -m "$message";
echo ""

echo "4. pushing"
git push
echo ""

echo "Done!ğŸ»"